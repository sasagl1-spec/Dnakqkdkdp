from hikka import loader, utils
from telethon.tl.types import Message
import random
import time
import re

@loader.tds
class SelectiveRPMod(loader.Module):
    """–†–ü –º–æ–¥—É–ª—å —Å –≤—ã–±–æ—Ä–æ–º —á–∞—Ç–æ–≤ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ —Ç—Ä–∏–≥–≥–µ—Ä–∞–º–∏"""
    
    strings = {"name": "SelectiveRPMod"}
    
    def __init__(self):
        self.commands = {
            # === –û–°–ù–û–í–ù–´–ï –†–ü –î–ï–ô–°–¢–í–ò–Ø ===
            "–¥–∞—Ç—å –ø—è—Ç—å": ["‚úã {sender} –¥–∞–µ—Ç –ø—è—Ç—å {target}", "üñêÔ∏è {sender} –¥–∞–µ—Ç –ø—è—Ç–æ—á–∫—É {target}"],
            "–∑–∞–ø–∏—Å–∞—Ç—å –Ω–∞ –Ω–æ–≥–æ—Ç–æ—á–∫–∏": ["üíÖ {sender} –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç {target} –Ω–∞ –Ω–æ–≥–æ—Ç–æ—á–∫–∏", "‚ú® {sender} –∑–∞–ø–∏—Å–∞–ª –Ω–∞ –º–∞–Ω–∏–∫—é—Ä {target}"],
            "–º–∞–Ω–∏–∫—é—Ä": ["üíÖ {sender} –¥–µ–ª–∞–µ—Ç –º–∞–Ω–∏–∫—é—Ä {target}", "üå∏ {sender} –∫—Ä–∞—Å–∏—Ç –Ω–æ–≥—Ç–∏ {target}"],
            "–∏—Å–ø—É–≥–∞—Ç—å": ["üò± {sender} –ø—É–≥–∞–µ—Ç {target}", "üëª {sender} –Ω–∞–ø—É–≥–∞–ª {target}"],
            "–Ω–∞–ø—É–≥–∞—Ç—å": ["üò® {sender} –ø—É–≥–∞–µ—Ç {target}", "üíÄ {sender} —Å—Ç—Ä–∞—à–Ω–æ –ø—É–≥–∞–µ—Ç {target}"],
            "–∏–∑–≤–∏–Ω–∏—Ç—å—Å—è": ["üôè {sender} –∏–∑–≤–∏–Ω—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ {target}", "üòî {sender} –ø—Ä–æ—Å–∏—Ç –ø—Ä–æ—â–µ–Ω–∏—è —É {target}"],
            "–ø—Ä–æ—Å—Ç–∏": ["ü•∫ {sender} –ø—Ä–æ—Å–∏—Ç –ø—Ä–æ—â–µ–Ω–∏—è —É {target}", "üôá {sender} –∏–∑–≤–∏–Ω—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ {target}"],
            "–∫—É—Å—å": ["üòà {sender} –∫—É—Å–∞–µ—Ç {target}", "ü¶∑ {sender} –±–æ–ª—å–Ω–æ –∫—É—Å–∞–µ—Ç {target}"],
            "–∫—É—Å–Ω—É—Ç—å": ["üê∫ {sender} –∫—É—Å–∞–µ—Ç {target}", "üò¨ {sender} –∫—É—Å–∞–µ—Ç –∑–∞ —É—Ö–æ {target}"],
            "–ª–∏–∑–Ω—É—Ç—å": ["üëÖ {sender} –ª–∏–∂–µ—Ç {target}", "üòõ {sender} –æ–±–ª–∏–∑—ã–≤–∞–µ—Ç {target}"],
            "–ª–∏–∑—å": ["üòã {sender} –ª–∏–∂–µ—Ç {target}", "üëÖ {sender} –ø—Ä–æ–≤–æ–¥–∏—Ç —è–∑—ã–∫–æ–º –ø–æ {target}"],
            "–æ–±–ª–∏–∑–∞—Ç—å": ["ü§§ {sender} –æ–±–ª–∏–∑—ã–≤–∞–µ—Ç {target}", "üëÖ {sender} –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–ª–∏–∑—ã–≤–∞–µ—Ç {target}"],
            "–æ–±–Ω—è—Ç—å": ["üíû {sender} –æ–±–Ω–∏–º–∞–µ—Ç {target}", "ü§ó {sender} –∫—Ä–µ–ø–∫–æ –æ–±–Ω–∏–º–∞–µ—Ç {target}"],
            "–æ–±–Ω–∏–º–∞—Ç—å": ["ü´Ç {sender} –æ–±–Ω–∏–º–∞–µ—Ç {target}", "üíï {sender} –Ω–µ–∂–Ω–æ –æ–±–Ω–∏–º–∞–µ—Ç {target}"],
            "–ø–æ–∑–¥—Ä–∞–≤–∏—Ç—å": ["üéâ {sender} –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ—Ç {target}", "ü•≥ {sender} –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ—Ç —Å –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–º {target}"],
            "–ø–æ–∑–¥—Ä–∞–≤–ª—è—é": ["üéä {sender} –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ—Ç {target}", "üéÅ {sender} –≥–æ–≤–æ—Ä–∏—Ç –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è {target}"],
            "–ø–æ—Ü–µ–ª–æ–≤–∞—Ç—å": ["üòò {sender} —Ü–µ–ª—É–µ—Ç {target}", "üíã {sender} –Ω–µ–∂–Ω–æ —Ü–µ–ª—É–µ—Ç {target}"],
            "—Ü–µ–ª–æ–≤–∞—Ç—å": ["üòö {sender} —Ü–µ–ª—É–µ—Ç {target}", "‚ù§Ô∏è {sender} —Å—Ç—Ä–∞—Å—Ç–Ω–æ —Ü–µ–ª—É–µ—Ç {target}"],
            "–ø—Ä–∏–∂–∞—Ç—å": ["ü§ó {sender} –ø—Ä–∏–∂–∏–º–∞–µ—Ç {target}", "üíû {sender} –∫—Ä–µ–ø–∫–æ –ø—Ä–∏–∂–∏–º–∞–µ—Ç {target}"],
            "–ø—Ä–∏–∂–∞–ª": ["üèãÔ∏è {sender} –ø—Ä–∏–∂–∏–º–∞–µ—Ç –∫ —Å—Ç–µ–Ω–µ {target}", "üí™ {sender} —Å–∏–ª—å–Ω–æ –ø—Ä–∏–∂–∏–º–∞–µ—Ç {target}"],
            "–ø–æ—Ç—Ä–æ–≥–∞—Ç—å": ["‚úã {sender} —Ç—Ä–æ–≥–∞–µ—Ç {target}", "üëê {sender} –Ω–µ–∂–Ω–æ —Ç—Ä–æ–≥–∞–µ—Ç {target}"],
            "—Ç—Ä–æ–≥–∞—Ç—å": ["ü§≤ {sender} —Ç—Ä–æ–≥–∞–µ—Ç {target}", "‚úã {sender} –ø—Ä–æ–≤–æ–¥–∏—Ç —Ä—É–∫–æ–π –ø–æ {target}"],
            "–ø–æ–∂–∞—Ç—å —Ä—É–∫—É": ["ü§ù {sender} –ø–æ–∂–∏–º–∞–µ—Ç —Ä—É–∫—É {target}", "üôå {sender} –∂–º–µ—Ç —Ä—É–∫—É {target}"],
            "—Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ": ["üëè {sender} –∂–º–µ—Ç —Ä—É–∫—É {target}", "ü§ù {sender} –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ {target}"],
            "–ø–æ—Å–ª–∞—Ç—å –Ω–∞—Ö—É–π": ["üñï {sender} –ø–æ—Å—ã–ª–∞–µ—Ç –Ω–∞—Ö—É–π {target}", "üëä {sender} –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞—Ö—É–π {target}"],
            "–ø–æ—Å–ª–∞–ª": ["üöÄ {sender} –ø–æ—Å—ã–ª–∞–µ—Ç {target} –Ω–∞—Ö—É–π", "üñï {sender} –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ñ–∞–∫ {target}"],
            "–ø–æ—Ö–≤–∞–ª–∏—Ç—å": ["üåü {sender} —Ö–≤–∞–ª–∏—Ç {target}", "üëè {sender} –≤–æ—Å—Ö–∏—â–∞–µ—Ç—Å—è {target}"],
            "—Ö–≤–∞–ª–∏—Ç—å": ["üèÜ {sender} —Ö–≤–∞–ª–∏—Ç {target}", "‚≠ê {sender} –≥–æ–≤–æ—Ä–∏—Ç –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã {target}"],
            "–ø–æ–Ω—é—Ö–∞—Ç—å": ["üëÉ {sender} –Ω—é—Ö–∞–µ—Ç {target}", "üå¨Ô∏è {sender} –≤–¥—ã—Ö–∞–µ—Ç –∞—Ä–æ–º–∞—Ç {target}"],
            "–Ω—é—Ö–∞—Ç—å": ["üåπ {sender} –Ω—é—Ö–∞–µ—Ç {target}", "üëÉ {sender} –Ω–∞—Å–ª–∞–∂–¥–∞–µ—Ç—Å—è –∑–∞–ø–∞—Ö–æ–º {target}"],
            "–ø–æ–≥–ª–∞–¥–∏—Ç—å": ["üêæ {sender} –≥–ª–∞–¥–∏—Ç {target}", "‚ú® {sender} –Ω–µ–∂–Ω–æ –≥–ª–∞–¥–∏—Ç {target}"],
            "–≥–ª–∞–¥–∏—Ç—å": ["ü§≤ {sender} –≥–ª–∞–¥–∏—Ç {target}", "üí´ {sender} –ª–∞—Å–∫–∞–µ—Ç {target}"],
            "–ø—Ä–∏–≥–ª–∞—Å–∏—Ç—å –Ω–∞ —á–∞—ë–∫": ["üçµ {sender} –ø—Ä–∏–≥–ª–∞—à–∞–µ—Ç {target} –Ω–∞ —á–∞–µ–∫", "‚òï {sender} –∑–æ–≤–µ—Ç –Ω–∞ —á–∞–π {target}"],
            "–ø—Ä–∏–≥–ª–∞—Å–∏—Ç—å –Ω–∞ —á–∞–π": ["ü´ñ {sender} –∑–æ–≤–µ—Ç –Ω–∞ —á–∞–π {target}", "üçµ {sender} –ø—Ä–∏–≥–ª–∞—à–∞–µ—Ç —á–∞–µ–≤–Ω–∏—á–∞—Ç—å {target}"],
            "—á–∞–π": ["‚òï {sender} –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —á–∞–π {target}", "üçµ {sender} —É–≥–æ—â–∞–µ—Ç —á–∞–µ–º {target}"],
            "–ø–Ω—É—Ç—å": ["üëû {sender} –ø–∏–Ω–∞–µ—Ç {target}", "ü¶µ {sender} –±—å–µ—Ç –Ω–æ–≥–æ–π {target}"],
            "–ø–∏–Ω–∞—Ç—å": ["‚öΩ {sender} –ø–∏–Ω–∞–µ—Ç {target}", "üë¢ {sender} –ø–∏–Ω–∞–µ—Ç –Ω–æ–≥–æ–π {target}"],
            "–ø–æ–∫–æ—Ä–º–∏—Ç—å": ["üçé {sender} –∫–æ—Ä–º–∏—Ç {target}", "üçï {sender} —É–≥–æ—â–∞–µ—Ç {target}"],
            "–∫–æ—Ä–º–∏—Ç—å": ["üçΩÔ∏è {sender} –∫–æ—Ä–º–∏—Ç {target}", "ü•ò {sender} –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –µ–¥—É {target}"],
            "—É—â–∏–ø–Ω—É—Ç—å": ["ü§è {sender} —â–∏–ø–∞–µ—Ç {target}", "‚úåÔ∏è {sender} –±–æ–ª—å–Ω–æ —â–∏–ø–∞–µ—Ç {target}"],
            "—â–∏–ø–∞—Ç—å": ["ü¶Ä {sender} —â–∏–ø–∞–µ—Ç {target}", "‚úÇÔ∏è {sender} –±–æ–ª—å–Ω–æ —â–∏–ø–∞–µ—Ç {target}"],
            "—É–¥–∞—Ä–∏—Ç—å": ["ü•ä {sender} —É–¥–∞—Ä—è–µ—Ç {target}", "üí• {sender} –±—å–µ—Ç —Å–æ –≤—Å–µ–π —Å–∏–ª—ã {target}"],
            "—à–ª—ë–ø–Ω—É—Ç—å": ["üëã {sender} —à–ª–µ–ø–∞–µ—Ç {target}", "üçë {sender} —à–ª–µ–ø–∞–µ—Ç –ø–æ –ø–æ–ø–µ {target}"],
            "—à–ª–µ–ø–Ω—É—Ç—å": ["‚úã {sender} —à–ª–µ–ø–∞–µ—Ç {target}", "üëã {sender} –¥–∞–µ—Ç –ø–æ–¥–∑–∞—Ç—ã–ª—å–Ω–∏–∫ {target}"],

            # === –î–õ–Ø –í–õ–Æ–ë–õ–Å–ù–ù–´–• ===
            "—Å–¥–µ–ª–∞—Ç—å –ø–æ–¥–∞—Ä–æ–∫": ["üéÅ {sender} –¥–∞—Ä–∏—Ç –ø–æ–¥–∞—Ä–æ–∫ {target}", "üéÄ {sender} –ø—Ä–µ–ø–æ–¥–Ω–æ—Å–∏—Ç –ø–æ–¥–∞—Ä–æ–∫ {target}"],
            "–ø–æ–¥–∞—Ä–∏—Ç—å": ["üéÅ {sender} –¥–∞—Ä–∏—Ç {target}", "üíù {sender} –¥–µ–ª–∞–µ—Ç –ø–æ–¥–∞—Ä–æ–∫ {target}"],
            "—É—Å—Ç—Ä–æ–∏—Ç—å —Å—é—Ä–ø—Ä–∏–∑": ["üéâ {sender} —É—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —Å—é—Ä–ø—Ä–∏–∑ –¥–ª—è {target}", "üéä {sender} –≥–æ—Ç–æ–≤–∏—Ç —Å—é—Ä–ø—Ä–∏–∑ {target}"],
            "—Å—é—Ä–ø—Ä–∏–∑": ["üéÅ {sender} –≥–æ—Ç–æ–≤–∏—Ç —Å—é—Ä–ø—Ä–∏–∑ {target}", "üé™ {sender} —É—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç—å {target}"],
            "–ø—Ä–∏–≥–ª–∞—Å–∏—Ç—å –≤ –∫–ª—É–±": ["üéµ {sender} –∑–æ–≤–µ—Ç –≤ –∫–ª—É–± {target}", "üé∂ {sender} –ø—Ä–∏–≥–ª–∞—à–∞–µ—Ç –Ω–∞ —Ç–∞–Ω—Ü—ã {target}"],
            "–∫–ª—É–±": ["üï∫ {sender} –∑–æ–≤–µ—Ç –≤ –∫–ª—É–± {target}", "üíÉ {sender} –ø—Ä–∏–≥–ª–∞—à–∞–µ—Ç –ø–æ—Ç–∞–Ω—Ü–µ–≤–∞—Ç—å {target}"],
            "–ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å –ø–æ –¥—É—à–∞–º": ["üí¨ {sender} –≥–æ–≤–æ—Ä–∏—Ç –ø–æ –¥—É—à–∞–º —Å {target}", "‚ù§Ô∏è {sender} –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥—É—à—É {target}"],
            "–¥—É—à–µ–≤–Ω—ã–π —Ä–∞–∑–≥–æ–≤–æ—Ä": ["üó£Ô∏è {sender} –≤–µ–¥–µ—Ç –¥—É—à–µ–≤–Ω—ã–π —Ä–∞–∑–≥–æ–≤–æ—Ä —Å {target}", "üí≠ {sender} –¥–µ–ª–∏—Ç—Å—è —Å–æ–∫—Ä–æ–≤–µ–Ω–Ω—ã–º {target}"],
            "—Å—Ö–æ–¥–∏—Ç—å –≤ –∫–∏–Ω–æ": ["üé¨ {sender} –∏–¥–µ—Ç –≤ –∫–∏–Ω–æ —Å {target}", "üçø {sender} –ø—Ä–∏–≥–ª–∞—à–∞–µ—Ç –≤ –∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä {target}"],
            "–∫–∏–Ω–æ": ["üìΩÔ∏è {sender} –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å—Ö–æ–¥–∏—Ç—å –≤ –∫–∏–Ω–æ —Å {target}", "üéûÔ∏è {sender} –∑–æ–≤–µ—Ç –Ω–∞ —Ñ–∏–ª—å–º {target}"],
            "–ø–æ–¥–∞—Ä–∏—Ç—å –∫–æ–Ω—Ñ–µ—Ç—ã": ["üç¨ {sender} –¥–∞—Ä–∏—Ç –∫–æ–Ω—Ñ–µ—Ç—ã {target}", "üç´ {sender} —É–≥–æ—â–∞–µ—Ç —Å–ª–∞–¥–æ—Å—Ç—è–º–∏ {target}"],
            "–∫–æ–Ω—Ñ–µ—Ç—ã": ["üç≠ {sender} –¥–∞—Ä–∏—Ç –∫–æ–Ω—Ñ–µ—Ç—ã {target}", "üç¨ {sender} —É–≥–æ—â–∞–µ—Ç –≤–∫—É—Å–Ω—è—à–∫–∞–º–∏ {target}"],
            "—Å–¥–µ–ª–∞—Ç—å –∑–∞–≤—Ç—Ä–∞–∫": ["üç≥ {sender} –≥–æ—Ç–æ–≤–∏—Ç –∑–∞–≤—Ç—Ä–∞–∫ –¥–ª—è {target}", "ü•û {sender} –∫–æ—Ä–º–∏—Ç –∑–∞–≤—Ç—Ä–∞–∫–æ–º {target}"],
            "–∑–∞–≤—Ç—Ä–∞–∫": ["‚òï {sender} –≥–æ—Ç–æ–≤–∏—Ç –∑–∞–≤—Ç—Ä–∞–∫ {target}", "üç≥ {sender} —É–≥–æ—â–∞–µ—Ç —É—Ç—Ä–µ–Ω–Ω–µ–π –µ–¥–æ–π {target}"],
            "–ø—Ä–∏–≥–ª–∞—Å–∏—Ç—å –ø–æ–≥—É–ª—è—Ç—å": ["üö∂ {sender} –∑–æ–≤–µ—Ç –Ω–∞ –ø—Ä–æ–≥—É–ª–∫—É {target}", "üå≥ {sender} –ø—Ä–∏–≥–ª–∞—à–∞–µ—Ç –ø–æ–≥—É–ª—è—Ç—å {target}"],
            "–ø—Ä–æ–≥—É–ª–∫–∞": ["üåÑ {sender} –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø—Ä–æ–≥—É–ª–∫—É {target}", "üö∂‚Äç‚ôÇÔ∏è {sender} –∑–æ–≤–µ—Ç –ø—Ä–æ–π—Ç–∏—Å—å {target}"],
            "–ø–æ–¥–∞—Ä–∏—Ç—å —à–æ–∫–æ–ª–∞–¥–∫—É": ["üç´ {sender} –¥–∞—Ä–∏—Ç —à–æ–∫–æ–ª–∞–¥–∫—É {target}", "üéÇ {sender} —É–≥–æ—â–∞–µ—Ç —à–æ–∫–æ–ª–∞–¥–æ–º {target}"],
            "—à–æ–∫–æ–ª–∞–¥": ["üç´ {sender} –¥–∞—Ä–∏—Ç —à–æ–∫–æ–ª–∞–¥ {target}", "üç´ {sender} —É–≥–æ—â–∞–µ—Ç —Å–ª–∞–¥–∫–∏–º {target}"],
            "–∫–∏–Ω—É—Ç—å –º–µ–º": ["üì± {sender} –∫–∏–¥–∞–µ—Ç –º–µ–º {target}", "üòÜ {sender} –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–º–µ—à–Ω–æ–π –º–µ–º {target}"],
            "–º–µ–º": ["üòÇ {sender} –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –º–µ–º {target}", "üì≤ {sender} –¥–µ–ª–∏—Ç—Å—è –º–µ–º–æ–º —Å {target}"],
            "–ø–æ–¥–µ–ª–∏—Ç—å—Å—è –µ–¥–æ–π": ["üçï {sender} –¥–µ–ª–∏—Ç—Å—è –µ–¥–æ–π —Å {target}", "üçî {sender} —É–≥–æ—â–∞–µ—Ç {target}"],
            "—É–≥–æ—Å—Ç–∏—Ç—å": ["üçé {sender} —É–≥–æ—â–∞–µ—Ç {target}", "üçñ {sender} –¥–µ–ª–∏—Ç—Å—è –µ–¥–æ–π —Å {target}"],
            "—Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –∞–Ω–µ–∫–¥–æ—Ç": ["üé≠ {sender} —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç –∞–Ω–µ–∫–¥–æ—Ç {target}", "üòÇ {sender} —Å–º–µ—à–∏—Ç –∞–Ω–µ–∫–¥–æ—Ç–æ–º {target}"],
            "–∞–Ω–µ–∫–¥–æ—Ç": ["üìú {sender} —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç –∞–Ω–µ–∫–¥–æ—Ç {target}", "üòÑ {sender} –≤–µ—Å–µ–ª–∏—Ç —à—É—Ç–∫–æ–π {target}"],
            "—Å–¥–µ–ª–∞—Ç—å –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç": ["üåπ {sender} –¥–µ–ª–∞–µ—Ç –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç {target}", "üíê {sender} —Ö–≤–∞–ª–∏—Ç {target}"],
            "–∫–æ–º–ø–ª–∏–º–µ–Ω—Ç": ["üåü {sender} –¥–µ–ª–∞–µ—Ç –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç {target}", "‚ú® {sender} –≥–æ–≤–æ—Ä–∏—Ç –ø—Ä–∏—è—Ç–Ω–æ–µ {target}"],
        }
        self.cooldowns = {}
        self.enabled_chats = set()
        self.custom_triggers = {}
        
    async def client_ready(self, client, db):
        self._db = db
        self._client = client
        self.settings = self._db.get("SelectiveRPMod", "settings", {
            "cooldown": 3,
            "enabled": True
        })
        self.enabled_chats = set(self._db.get("SelectiveRPMod", "enabled_chats", []))
        self.custom_triggers = self._db.get("SelectiveRPMod", "custom_triggers", {})
    
    async def rpaddchatcmd(self, message: Message):
        """–î–æ–±–∞–≤–∏—Ç—å —á–∞—Ç –≤ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ: .rpaddchat"""
        chat_id = message.chat_id
        if chat_id in self.enabled_chats:
            await message.edit("‚úÖ –≠—Ç–æ—Ç —á–∞—Ç —É–∂–µ –≤ —Å–ø–∏—Å–∫–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö")
            return
        
        self.enabled_chats.add(chat_id)
        self._db.set("SelectiveRPMod", "enabled_chats", list(self.enabled_chats))
        await message.edit("‚úÖ –ß–∞—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –¥–ª—è –†–ü –∫–æ–º–∞–Ω–¥")

    async def rpremovechatcmd(self, message: Message):
        """–£–¥–∞–ª–∏—Ç—å —á–∞—Ç –∏–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö: .rpremovechat"""
        chat_id = message.chat_id
        if chat_id not in self.enabled_chats:
            await message.edit("‚ùå –≠—Ç–æ—Ç —á–∞—Ç –Ω–µ –≤ —Å–ø–∏—Å–∫–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö")
            return
        
        self.enabled_chats.remove(chat_id)
        self._db.set("SelectiveRPMod", "enabled_chats", list(self.enabled_chats))
        await message.edit("‚úÖ –ß–∞—Ç —É–¥–∞–ª–µ–Ω –∏–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö")

    async def rplistchatscmd(self, message: Message):
        """–°–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö —á–∞—Ç–æ–≤: .rplistchats"""
        if not self.enabled_chats:
            await message.edit("üìã –°–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö —á–∞—Ç–æ–≤ –ø—É—Å—Ç")
            return
        
        response = "üìã –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ —á–∞—Ç—ã –¥–ª—è –†–ü:\n\n"
        for chat_id in self.enabled_chats:
            try:
                chat = await self._client.get_entity(chat_id)
                title = getattr(chat, 'title', f'–ß–∞—Ç {chat_id}')
                response += f"‚Ä¢ {title} (ID: {chat_id})\n"
            except:
                response += f"‚Ä¢ Unknown chat (ID: {chat_id})\n"
        
        await message.edit(response)

    async def rpaddtriggercmd(self, message: Message):
        """–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ç—Ä–∏–≥–≥–µ—Ä: .rpaddtrigger <—Ç—Ä–∏–≥–≥–µ—Ä> | <–æ—Ç–≤–µ—Ç1> | <–æ—Ç–≤–µ—Ç2> | ..."""
        args = utils.get_args_raw(message)
        if not args or "|" not in args:
            await message.edit(
                "‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç!\n"
                "–ü—Ä–∏–º–µ—Ä: .rpaddtrigger –ø—Ä–∏–≤–µ—Ç | üëã {sender} –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç {target} | üéâ {sender} —Ä–∞–¥ –≤–∏–¥–µ—Ç—å {target}"
            )
            return
        
        parts = [part.strip() for part in args.split("|")]
        trigger = parts[0].lower()
        responses = parts[1:]
        
        if not trigger or not responses:
            await message.edit("‚ùå –¢—Ä–∏–≥–≥–µ—Ä –∏ –æ—Ç–≤–µ—Ç—ã –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º–∏!")
            return
        
        self.custom_triggers[trigger] = responses
        self._db.set("SelectiveRPMod", "custom_triggers", self.custom_triggers)
        await message.edit(f"‚úÖ –¢—Ä–∏–≥–≥–µ—Ä '{trigger}' –¥–æ–±–∞–≤–ª–µ–Ω —Å {len(responses)} –æ—Ç–≤–µ—Ç–∞–º–∏")

    async def rpremovetriggercmd(self, message: Message):
        """–£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ç—Ä–∏–≥–≥–µ—Ä: .rpremovetrigger <—Ç—Ä–∏–≥–≥–µ—Ä>"""
        trigger = utils.get_args_raw(message).lower()
        if not trigger:
            await message.edit("‚ùå –£–∫–∞–∂–∏—Ç–µ —Ç—Ä–∏–≥–≥–µ—Ä –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è")
            return
        
        if trigger not in self.custom_triggers:
            await message.edit("‚ùå –¢–∞–∫–æ–≥–æ —Ç—Ä–∏–≥–≥–µ—Ä–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç")
            return
        
        del self.custom_triggers[trigger]
        self._db.set("SelectiveRPMod", "custom_triggers", self.custom_triggers)
        await message.edit(f"‚úÖ –¢—Ä–∏–≥–≥–µ—Ä '{trigger}' —É–¥–∞–ª–µ–Ω")

    async def rplisttriggerscmd(self, message: Message):
        """–°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤: .rplisttriggers"""
        if not self.custom_triggers:
            await message.edit("üìã –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç")
            return
        
        response = "üìã –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã:\n\n"
        for trigger, responses in self.custom_triggers.items():
            response += f"‚Ä¢ {trigger}: {len(responses)} –æ—Ç–≤–µ—Ç–æ–≤\n"
        
        await message.edit(response)

    async def watcher(self, message: Message):
        """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π —Ç–æ–ª—å–∫–æ –≤ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö —á–∞—Ç–∞—Ö"""
        if not self.settings["enabled"] or not message.text or message.out:
            return
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑—Ä–µ—à–µ–Ω –ª–∏ —á–∞—Ç
        chat_id = message.chat_id
        if chat_id not in self.enabled_chats:
            return
        
        current_time = time.time()
        user_id = message.sender_id
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—É–ª–¥–∞—É–Ω–∞
        if user_id in self.cooldowns and current_time - self.cooldowns[user_id] < self.settings["cooldown"]:
            return
        
        text = message.text.lower().strip()
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
        if text in self.commands:
            response = random.choice(self.commands[text])
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã
        elif text in self.custom_triggers:
            response = random.choice(self.custom_triggers[text])
        else:
            return
        
        # –ó–∞–º–µ–Ω–∞ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤
        sender_name = await self.get_user_name(user_id)
        
        # –ï—Å–ª–∏ –µ—Å—Ç—å reply, –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ –∫–∞–∫ target
        if message.is_reply:
            try:
                reply = await message.get_reply_message()
                target_user = await self._client.get_entity(reply.sender_id)
                target_name = target_user.first_name or f"user_{reply.sender_id}"
            except:
                target_name = "–≤—Å–µ—Ö"
        else:
            target_name = "–≤—Å–µ—Ö"
        
        response = response.format(sender=sender_name, target=target_name)
        await message.reply(response)
        self.cooldowns[user_id] = current_time
    
    async def get_user_name(self, user_id: int):
        """–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
        try:
            user = await self._client.get_entity(user_id)
            return user.first_name or f"user_{user_id}"
        except:
            return f"user_{user_id}"
    
    async def rpcmd(self, message: Message):
        """–°–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥: .rp"""
        categories = {
            "–û—Å–Ω–æ–≤–Ω—ã–µ –†–ü": list(self.commands.keys())[:30],
            "–î–ª—è –≤–ª—é–±–ª–µ–Ω–Ω—ã—Ö": list(self.commands.keys())[30:]
        }
        
        response = "üé≠ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –†–ü –∫–æ–º–∞–Ω–¥:\n\n"
        for category, commands in categories.items():
            response += f"üîπ {category}: {len(commands)} –∫–æ–º–∞–Ω–¥\n"
        
        response += f"\nüìù –ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏ –∫–æ–º–∞–Ω–¥—É –≤ —á–∞—Ç\n"
        response += f"‚è±Ô∏è –ö—É–ª–¥–∞—É–Ω: {self.settings['cooldown']}—Å–µ–∫\n"
        response += f"üî¢ –í—Å–µ–≥–æ –∫–æ–º–∞–Ω–¥: {len(self.commands)}\n"
        response += f"üéØ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤: {len(self.custom_triggers)}\n\n"
        response += "üîß –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:\n"
        response += "‚Ä¢ .rpaddchat - –¥–æ–±–∞–≤–∏—Ç—å —á–∞—Ç\n"
        response += "‚Ä¢ .rpremovechat - —É–¥–∞–ª–∏—Ç—å —á–∞—Ç\n"
        response += "‚Ä¢ .rplistchats - —Å–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤\n"
        response += "‚Ä¢ .rpaddtrigger - –¥–æ–±–∞–≤–∏—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä\n"
        response += "‚Ä¢ .rpremovetrigger - —É–¥–∞–ª–∏—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä\n"
        response += "‚Ä¢ .rplisttriggers - —Å–ø–∏—Å–æ–∫ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤\n"
        response += "‚Ä¢ .rptoggle on/off - –≤–∫–ª/–≤—ã–∫–ª –º–æ–¥—É–ª—å"
        
        await message.edit(response)
    
    async def rptogglecmd(self, message: Message):
        """–í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å: .rptoggle <on/off>"""
        args = utils.get_args_raw(message).lower()
        if args == "on":
            self.settings["enabled"] = True
            await message.edit("‚úÖ –†–ü –∫–æ–º–∞–Ω–¥—ã –≤–∫–ª—é—á–µ–Ω—ã")
        elif args == "off":
            self.settings["enabled"] = False
            await message.edit("‚ùå –†–ü –∫–æ–º–∞–Ω–¥—ã –≤—ã–∫–ª—é—á–µ–Ω—ã")
        else:
            status = "–≤–∫–ª—é—á–µ–Ω—ã" if self.settings["enabled"] else "–≤—ã–∫–ª—é—á–µ–Ω—ã"
            await message.edit(f"üìä –†–ü –∫–æ–º–∞–Ω–¥—ã: {status}\n–ò—Å–ø–æ–ª—å–∑—É–π: .rptoggle on/off")
        
        self._db.set("SelectiveRPMod", "settings", self.settings)            'headers': dict(self.session.headers),
            'cookies_count': len(self.session.cookies)
        }

    def test_authorized_access(self, test_endpoint="/profile"):
        """–¢–µ—Å—Ç–∏—Ä—É–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –∑–∞—â–∏—â–µ–Ω–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ"""
        try:
            target_url = urljoin(self.base_url, test_endpoint)
            response = self.session.get(
                target_url, 
                timeout=self.timeout,
                verify=self.verify_ssl
            )
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–ª–∏—á–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
            access_indicators = [
                response.status_code == 200,
                'login' not in response.text.lower(),
                'authenticate' not in response.text.lower(),
                not response.url.endswith('/login')
            ]
            
            return all(access_indicators)
            
        except Exception as e:
            print(f"[-] –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞: {e}")
            return False

# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –î–õ–Ø –û–ë–†–ê–ó–û–í–ê–¢–ï–õ–¨–ù–´–• –¶–ï–õ–ï–ô:
if __name__ == "__main__":
    # ‚ö†Ô∏è –¢–ï–°–¢–ò–†–£–ô–¢–ï –¢–û–õ–¨–ö–û –°–í–û–ò –°–ï–†–í–ï–†–´ –ò–õ–ò –° –†–ê–ó–†–ï–®–ï–ù–ò–Ø!
    module = AdvancedLoginModule(
        "https://test-site.com",
        timeout=15,
        verify_ssl=True  # –û—Ç–∫–ª—é—á–∏—Ç–µ –µ—Å–ª–∏ —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
    )
    
    if module.login("test_user", "test_password"):
        print("‚úì –î–æ—Å—Ç—É–ø –∫ –∑–∞—â–∏—â–µ–Ω–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ:", module.test_authorized_access())
        print("‚úì –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Å—Å–∏–∏:", module.get_session_info())
    else:
        print("‚úó –ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É")
